<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="data.mybatis.mapper.SeatMapper">
	
	<!-- 좌석 리스트 -->
	<select id="getList"
		resultType="com.test.finalproject.vo.SeatVo"
	>
		select * from seat where screencode=#{screencode}
	</select>
	
	<!-- 좌석 등록 -->
	<insert id="insert">
		<selectKey resultType="int" order="AFTER">
			select count(*) from seat 
			where screencode=#{screencode} and state=1
		</selectKey>
		<foreach item="seat" collection="list" separator=" " 
			open="INSERT ALL" close="select * from dual"
		>
			into seat values (get_seq_seat_nextval, #{seat.screencode}
			, #{seat.seatrow}, #{seat.seatcol}, #{seat.code}, #{seat.state})
		</foreach>
	</insert>
	
	<!-- 좌석 삭제 -->
	<delete id="delete">
		delete from seat where screencode=#{screencode}
	</delete>
	
</mapper>