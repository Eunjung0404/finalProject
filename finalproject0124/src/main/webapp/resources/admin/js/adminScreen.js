(function(t){function e(e){for(var o,a,i=e[0],c=e[1],l=e[2],h=0,d=[];h<i.length;h++)a=i[h],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={adminScreen:0},s=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("41d5")},"402c":function(t,e,n){"use strict";var o=n("2b0e"),r=n("f309");o["a"].use(r["a"]),e["a"]=new r["a"]({})},"41d5":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("div",[n("v-toolbar",{attrs:{dark:""}},[n("v-btn",{attrs:{icon:""},on:{click:function(e){return t.moveLink("/admin/theater/"+t.theatername)}}},[n("v-icon",[t._v("mdi-reply")])],1),n("v-toolbar-title",[t._v("관리자 메뉴   >   극장 관리   >   "+t._s(t.toolbar))]),n("v-spacer"),n("v-btn",{staticClass:"mr-5",attrs:{outlined:"",rounded:""},on:{"~click":function(e){return t.moveLink("/logout")}}},[n("v-icon",{attrs:{left:"",dark:""}},[t._v(" mdi-account-circle ")]),t._v(" LOGOUT ")],1)],1)],1),n("v-container",{staticClass:"overflow-hidden d-flex pa-6 max-auto justify-center"},[n("table",[n("tbody",t._l(t.y,(function(e){return n("tr",{key:e},t._l(t.x,(function(e){return n("td",{key:e,on:{mousedown:t.clDown,mouseup:t.clUp}})})),0)})),0)]),n("v-stepper",{attrs:{vertical:"",width:"300px",height:"750px"},model:{value:t.e6,callback:function(e){t.e6=e},expression:"e6"}},[n("v-stepper-step",{attrs:{complete:t.e6>1,rules:[function(){return t.rule1}],step:"1"}},[t._v(" 기본 크기 지정 "),n("small",[t._v(t._s(t.chX)+" x "+t._s(t.chY))])]),n("v-stepper-content",{attrs:{step:"1"}},[n("p",[t._v("- 드래그로 영역을 선택")]),n("P",[t._v("가로 : "+t._s(t.chX))]),n("P",[t._v("세로 : "+t._s(t.chY))]),n("v-btn",{staticClass:"mb-5",attrs:{color:"primary"},on:{click:function(e){t.next2()}}},[t._v(" Continue ")]),n("v-btn",{attrs:{outlined:"",elevation:"3"},on:{click:t.init}},[t._v(" Cancel ")])],1),n("v-stepper-step",{attrs:{complete:t.e6>2,step:"2"}},[t._v(" 공백 영역 지정 ")]),n("v-stepper-content",{attrs:{step:"2"}},[n("p",[t._v("- 드래그로 영역을 선택")]),n("v-btn",{staticClass:"mb-5",attrs:{color:"primary"},on:{click:function(e){t.e6=3,t.next3()}}},[t._v(" Continue ")]),n("v-btn",{attrs:{outlined:"",elevation:"3"},on:{click:function(e){return t.resetTd()}}},[t._v(" Cancel ")])],1),n("v-stepper-step",{attrs:{complete:t.e6>3,step:"3"}},[t._v(" 좌석 번호 생성 ")]),n("v-stepper-content",{attrs:{step:"3"}},[n("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.e6=4}}},[t._v(" Continue ")])],1),n("v-stepper-step",{attrs:{step:"4"}},[t._v(" 등록 ")]),n("v-stepper-content",{attrs:{step:"4"}},[n("v-btn",{staticClass:"mb-5",attrs:{color:"primary",loading:t.loading,disabled:t.loading},on:{click:t.postSv}},[n("v-icon",{attrs:{left:""}},[t._v(" mdi-check ")]),t._v(" SUBMIT ")],1),n("v-btn",{attrs:{color:"error",disabled:t.loading},on:{click:function(e){return window.location.reload()}}},[n("v-icon",{attrs:{left:""}},[t._v(" mdi-refresh ")]),t._v(" RESET ")],1),n("v-slide-x-transition",[t.resp?n("div",{staticClass:"mt-16 mr-7 justify-center text-center"},[n("v-icon",{staticClass:"mb-6",attrs:{size:"70",color:t.getColor()}},[t._v(" "+t._s(t.icon)+" ")]),n("p",{class:t.getFontColor()},[n("strong",[t._v(t._s(t.msg))])])],1):t._e()])],1)],1)],1)],1)],1)},s=[],a=n("2909"),i=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("159b"),n("e9c4"),n("ac1f"),n("00b4"),n("a9e3"),n("fb6a"),n("1276"),{name:"App",components:{},data:function(){return{test:!1,cp:"/testproxy",screencode:1,theatername:"강남",seatlist:[],x:30,y:25,chX:0,chY:0,chColor:"#accafd",e6:1,td:[],startTd:0,startX:0,startY:0,resetSet:new Set,resetArr:new Array,rule1:!0,loading:!1,resp:!1,err:!1,msg:"등록 완료",icon:"mdi-check"}},methods:{clDown:function(t){t.preventDefault(),this.init(),this.startTd=Object(a["a"])(this.td).indexOf(t.target),this.startX=t.pageX-(t.pageX-document.querySelector("table").offsetLeft)%30,this.startY=t.pageY-(t.pageY-document.querySelector("table").offsetTop)%30,this.td[this.startTd].style.backgroundColor="lightblue",document.querySelector("tbody").addEventListener("mousemove",this.cccMove),console.log(this.startTd)},init:function(){this.startTd=0,this.startX=0,this.startY=0,this.chX=0,this.chY=0,this.td.forEach((function(t){return t.style.backgroundColor="white"}))},clUp:function(){document.querySelector("tbody").removeEventListener("mousemove",this.cccMove),this.rule1=!0},clMove2:function(t){this.chX=parseInt((t.pageX-this.startX)/30)+1,this.chY=parseInt((t.pageY-this.startY)/30)+1},cccMove:function(){},eraseMove:function(t){t.stopPropagation(),"lightblue"==t.target.style.backgroundColor&&(t.target.style.backgroundColor="white",this.resetSet.add(Object(a["a"])(this.td).indexOf(t.target)))},next2:function(){var t=this;0!=this.chX&&0!=this.chY?(this.clDown=function(e){e.stopPropagation(),e.preventDefault(),document.querySelector("tbody").addEventListener("mousemove",t.cccMove),"lightblue"==e.target.style.backgroundColor&&(e.target.style.backgroundColor="white",t.resetSet.add(Object(a["a"])(t.td).indexOf(e.target)))},this.cccMove=this._.throttle(this.eraseMove,10),this.clUp=function(){console.log(Object(a["a"])(t.resetSet)),document.querySelector("tbody").removeEventListener("mousemove",t.cccMove),t.resetArr.push(Object(a["a"])(t.resetSet)),t.resetSet.clear(),console.log(Object(a["a"])(t.resetArr))},this.e6=2):this.rule1=!1},resetTd:function(){var t=this;this.resetArr.length>0&&this.resetArr.pop().forEach((function(e){t.td[e].style.backgroundColor="lightblue"}))},next3:function(){for(var t,e=0,n=0,o=0;o<this.chY;o++){for(var r=0;r<this.chX;r++)t=this.startTd+r+30*o,"lightblue"==this.td[t].style.backgroundColor?this.td[t].textContent=String.fromCharCode(65+o-e)+(r+1):n++;e=n==this.chX?++e:e,n=0}this.clDown=function(){},this.clUp=function(){}},createJson:function(){for(var t,e=new Array,n=0;n<this.chY;n++)for(var o=0;o<this.chX;o++){var r=new Object;t=this.startTd+o+30*n,r.screencode=this.screencode,r.seatrow=n+1,r.seatcol=o+1,"lightblue"==this.td[t].style.backgroundColor?(r.code=this.td[t].textContent,r.state=1):(r.code="@empty",r.state=0),e.push(r)}return JSON.stringify(e)},postSv:function(){var t=this;this.loading=!0,console.log(this.createJson());var e=this.createJson(),n="/admin/theater/"+this.theatername+"/"+this.screencode;0==this.seatlist.length?this.$http.post(this.cp+n,e,{headers:{"Content-Type":"application/json"}}).then((function(e){"success"==e.data.code?(t.resp=!0,setTimeout((function(){window.location.href=t.cp+"/admin/theater/"+t.theatername}),800)):(t.err=!0,t.msg="오류 발생",t.icon="mdi-close",t.resp=!0,t.loading=!1,alert(e.data))})).catch((function(e){t.err=!0,t.msg=e.response.data.msg,t.icon="mdi-close",t.resp=!0,t.loading=!1,console.log(e.response.data)})):this.putSv(n,e)},putSv:function(t,e){var n=this;this.$http.put(this.cp+t,e,{headers:{"Content-Type":"application/json"}}).then((function(t){"success"==t.data.code?(n.resp=!0,setTimeout((function(){window.location.href=n.cp+"/admin/theater/"+n.theatername}),800)):(n.err=!0,n.msg="오류 발생",n.icon="mdi-close",n.resp=!0,n.loading=!1,alert(t.data))})).catch((function(t){n.err=!0,n.msg=t.response.data.msg,n.icon="mdi-close",n.resp=!0,n.loading=!1,console.log(t.response.data)}))},getSeat:function(){var t=this,e=this.cp+"/api/theater/"+this.theatername+"/screen/"+this.screencode+"/seat";this.$http.get(e).then((function(e){t.seatlist=e.data,console.log(e.data)})).catch((function(e){t.seatlist=[],console.log(e.response.data.msg)}))},getColor:function(){return this.err?"red darken-1":"green darken-2"},getFontColor:function(){return this.err?"red--text text--darken-1":"green--text text--darken-2"},moveLink:function(t){"#"!=t&&(window.location.href=this.cp+t)}},watch:{chX:function(t,e){if(t>=e)for(var n=0;n<this.chY;n++)this.td[this.startTd+(t-1)+30*n].style.backgroundColor="lightblue";else for(var o=0;o<this.chY;o++)this.td[this.startTd+(e-1)+30*o].style.backgroundColor="white"},chY:function(t,e){if(t>=e)for(var n=0;n<this.chX;n++)this.td[this.startTd+30*(t-1)+n].style.backgroundColor="lightblue";else for(var o=0;o<this.chX;o++)this.td[this.startTd+30*(e-1)+o].style.backgroundColor="white"}},computed:{toolbar:function(){return 0==this.seatlist.length?"좌석 등록":"좌석 수정"}},mounted:function(){this.td=document.querySelectorAll("td"),this.cccMove=this.clMove2,this.test||(this.cp=document.getElementById("cp").value,this.screencode=Number(window.location.pathname.split("/").slice(-1)[0]),this.theatername=window.location.pathname.split("/").slice(-2)[0]),this.getSeat()}}),c=i,l=(n("7cf2"),n("2877")),u=n("6544"),h=n.n(u),d=n("7496"),p=n("8336"),f=n("a523"),v=n("132d"),g=n("f6c4"),m=n("0789"),b=n("2fa4"),y=n("7e85"),_=n("e516"),w=n("56a4"),k=n("71d9"),C=n("2a7f"),S=Object(l["a"])(c,r,s,!1,null,"2d55fce8",null),x=S.exports;h()(S,{VApp:d["a"],VBtn:p["a"],VContainer:f["a"],VIcon:v["a"],VMain:g["a"],VSlideXTransition:m["d"],VSpacer:b["a"],VStepper:y["a"],VStepperContent:_["a"],VStepperStep:w["a"],VToolbar:k["a"],VToolbarTitle:C["a"]});var T=n("402c"),O=n("bc3a"),j=n.n(O),X=n("2ef0"),Y=n.n(X);o["a"].config.productionTip=!1,o["a"].prototype.$http=j.a,o["a"].prototype._=Y.a,new o["a"]({vuetify:T["a"],render:function(t){return t(x)}}).$mount("#app")},"7cf2":function(t,e,n){"use strict";n("e004")},e004:function(t,e,n){}});
//# sourceMappingURL=adminScreen.1c1350cc.js.map